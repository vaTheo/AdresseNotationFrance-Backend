generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String                @id @default(uuid())
  password            String?
  email               String?               @unique
  createdAt           DateTime              @default(now())
  username            String?               @unique
  role                String                @default("user")
  uuid                String                @unique
  DataSourceAddressID DataSourceAddressID[]
}

model DataSourceAddressID {
  id                String              @id @default(uuid())
  addressID         String              @unique
  street            String
  city              String
  postcode          String
  citycode          String
  userId            String
  latitude          Float
  longitude         Float
  AllRatings        AllRatings[]
  user              User                @relation(fields: [userId], references: [id])
  jsonDataEau       jsonDataEau[]
  jsonDataGeorisque jsonDataGeorisque[]
}

model jsonDataEau {
  id            String              @id @default(uuid())
  addressID     Int                 @unique
  eauPotable    Json?
  DataSourcesID String
  coursEau      Json?
  dataSource    DataSourceAddressID @relation(fields: [DataSourcesID], references: [id])
}

model jsonDataGeorisque {
  id                        String              @id @default(uuid())
  AZIData                   Json?
  CatnatData                Json?
  InstallationsClasseesData Json?
  MVTData                   Json?
  RadonData                 Json?
  RisquesData               Json?
  SISData                   Json?
  TRIData                   Json?
  ZonageSismiqueData        Json?
  DataSourcesID             String
  dataSource                DataSourceAddressID @relation(fields: [DataSourcesID], references: [id])
}

model AllRatings {
  id                        String               @id @default(uuid())
  addressID                 String               @unique
  eauAnalysis               Int
  AZIData                   Int
  CatnatData                Int
  InstallationsClasseesData Int
  MVTData                   Int
  RadonData                  Int
  RisquesData               Int
  SISData                   Int
  TRIData                   Int
  ZonageSismiqueData        Int
  createdAt                 DateTime             @default(now())
  DataSourcesID             String?
  dataSource                DataSourceAddressID? @relation(fields: [DataSourcesID], references: [id])
}
