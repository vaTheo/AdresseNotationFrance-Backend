generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userUUID            String                  @unique
  password            String?
  email               String?                 @unique
  createdAt           DateTime                @default(now())
  username            String?                 @unique
  role                String                  @default("user")
  dataSourceAddresses UserAddressInfo[]
}

model AddressInfo {
  addressID           String                  @unique
  street              String
  city                String
  postcode            String
  citycode            String
  latitude            Float
  longitude           Float
  AllRatings          AllRatings[]
  jsonDataEau         jsonDataEau[]
  jsonDataGeorisque   jsonDataGeorisque[]
  users               UserAddressInfo[]
}

model UserAddressInfo {
  userUUID          String
  addressInfoId     String
  user              User          @relation(fields: [userUUID], references: [userUUID])
  addressInfo       AddressInfo   @relation(fields: [addressInfoId], references: [addressID])
  @@id([userUUID, addressInfoId])
}
model jsonDataEau {
  addressID     String      @unique
  eauPotable    Json?
  coursEau      Json?
  dataSource    AddressInfo @relation(fields: [addressID], references: [addressID])
}

model jsonDataGeorisque {
  addressID                 String      @unique
  AZIData                   Json?
  CatnatData                Json?
  InstallationsClasseesData Json?
  MVTData                   Json?
  RadonData                 Json?
  RisquesData               Json?
  SISData                   Json?
  TRIData                   Json?
  ZonageSismiqueData        Json?
  dataSource                AddressInfo @relation(fields: [addressID], references: [addressID])
}

model AllRatings {
  addressID                 String       @unique
  eauPotable                Int?
  coursEau                  Int?
  AZIData                   Int?
  CatnatData                Int?
  InstallationsClasseesData Int?
  MVTData                   Int?
  RadonData                 Int?
  RisquesData               Int?
  SISData                   Int?
  TRIData                   Int?
  ZonageSismiqueData        Int?
  createdAt                 DateTime     @default(now())
  dataSource                AddressInfo? @relation(fields: [addressID], references: [addressID])
}
